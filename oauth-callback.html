<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>OAuth Callback</title>
    <script src="https://js.arcgis.com/4.34/"></script>
    <script>
      require(["esri/identity/IdentityManager"], (IdentityManager) => {
        IdentityManager.completeOAuth2()
          .then(() => {
            console.log("OAuth sign-in completed successfully.");
            // Redirect to your app after successful completion
            window.location.replace("https://lenny400.github.io/AGE-OAuth-Test/");
          })
          .catch((err) => {
            console.error("OAuth sign-in failed:", err);
            document.body.innerHTML = "<p>Sign-in failed. Check console for details.</p>";
          });
      });
    </script>
  </head>
  <body>
    <p>Completing sign-in...</p>
  </body>
</html>
